/* ===========================================
   GLOBAL KARA BACKGROUND LAYER (SMOOTH)
   Graphite + Fog Cyan
   =========================================== */

:root {
  --kara-accent: #8fd4d2;
  --kara-accent-soft: rgba(143, 212, 210, 0.22);
  --kara-accent-node: rgba(143, 212, 210, 0.38);
  --kara-accent-line: rgba(143, 212, 210, 0.14);

  /* eased movement curves */
  --ease-slow: cubic-bezier(0.18, 0.45, 0.25, 1);
  --ease-pulse: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-flow: cubic-bezier(0.65, 0, 0.35, 1);
}

/* ============================================================
   FRACTAL GRID (smooth drifting)
   ============================================================ */
.kara-grid {
  position: fixed;
  inset: 0;
  background-image: linear-gradient(
      rgba(255, 255, 255, 0.025) 1px,
      transparent 1px
    ),
    linear-gradient(90deg, rgba(255, 255, 255, 0.025) 1px, transparent 1px);
  background-size: 42px 42px;
  opacity: 0.22;
  animation: karaGridShift 95s var(--ease-slow) infinite alternate;
  pointer-events: none;
}

@keyframes karaGridShift {
  0% {
    transform: translate(0, 0);
  }
  100% {
    transform: translate(-180px, -180px);
  }
}

/* ============================================================
   NOISE (smooth opacity wobble)
   ============================================================ */
.kara-noise {
  position: fixed;
  inset: 0;
  opacity: 0.06;
  animation: karaNoiseFade 12s ease-in-out infinite alternate;
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='280' height='280'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/></filter><rect width='100%' height='100%' filter='url(%23n)'/></svg>");
  mix-blend-mode: soft-light;
}

@keyframes karaNoiseFade {
  0% {
    opacity: 0.03;
  }
  100% {
    opacity: 0.07;
  }
}

/* ============================================================
   CURSOR LIGHT (eased following)
   ============================================================ */
.kara-light {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
      circle at var(--kara-x, 50%) var(--kara-y, 40%),
      rgba(255, 255, 255, 0.12),
      transparent 60%
    ),
    radial-gradient(
      circle at 20% 10%,
      rgba(143, 212, 210, 0.12),
      transparent 70%
    );
  mix-blend-mode: overlay;
  transition: background-position 0.25s var(--ease-slow),
    opacity 0.4s var(--ease-slow);
}

/* ============================================================
   CYBERNETIC CIRCUIT (smooth pulses + flowing data)
   ============================================================ */
.kara-circuit {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

/* --- Smooth pulsing nodes --- */
.circuit-node {
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 999px;
  background: var(--kara-accent-node);
  box-shadow: 0 0 14px var(--kara-accent-soft);
  animation: karaNodePulse 6s var(--ease-pulse) infinite;
}

@keyframes karaNodePulse {
  0% {
    opacity: 0.15;
    transform: scale(0.75);
  }
  50% {
    opacity: 0.72;
    transform: scale(1.45);
  }
  100% {
    opacity: 0.2;
    transform: scale(0.8);
  }
}

/* --- Smooth data line drift --- */
.circuit-line {
  position: absolute;
  height: 1px;
  background: var(--kara-accent-line);
  box-shadow: 0 0 24px var(--kara-accent-soft);
  animation: karaLineFlow 8s var(--ease-flow) infinite;
  transform-origin: left center;
  opacity: 0.45;
}

@keyframes karaLineFlow {
  0% {
    opacity: 0.15;
    transform: translateX(0) scaleX(1);
  }
  40% {
    opacity: 0.58;
    transform: translateX(24px) scaleX(1.15);
  }
  100% {
    opacity: 0.18;
    transform: translateX(0) scaleX(1);
  }
}
